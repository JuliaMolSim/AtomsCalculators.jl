<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Previous Version of Interface Docs · AtomsCalculators.jl</title><meta name="title" content="Previous Version of Interface Docs · AtomsCalculators.jl"/><meta property="og:title" content="Previous Version of Interface Docs · AtomsCalculators.jl"/><meta property="twitter:title" content="Previous Version of Interface Docs · AtomsCalculators.jl"/><meta name="description" content="Documentation for AtomsCalculators.jl."/><meta property="og:description" content="Documentation for AtomsCalculators.jl."/><meta property="twitter:description" content="Documentation for AtomsCalculators.jl."/><meta property="og:url" content="https://JuliaMolSim.github.io/AtomsCalculators.jl/intdocback/"/><meta property="twitter:url" content="https://JuliaMolSim.github.io/AtomsCalculators.jl/intdocback/"/><link rel="canonical" href="https://JuliaMolSim.github.io/AtomsCalculators.jl/intdocback/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">AtomsCalculators.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../interface/">Interface</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li><li><a class="tocitem" href="../example/">Example</a></li><li><a class="tocitem" href="../api/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Previous Version of Interface Docs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Previous Version of Interface Docs</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaMolSim/AtomsCalculators.jl/blob/master/docs/src/intdocback.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Previous-Version-of-Interface-Docs"><a class="docs-heading-anchor" href="#Previous-Version-of-Interface-Docs">Previous Version of Interface Docs</a><a id="Previous-Version-of-Interface-Docs-1"></a><a class="docs-heading-anchor-permalink" href="#Previous-Version-of-Interface-Docs" title="Permalink"></a></h1><p>There are two alternative ways to call the interface: using functions <code>potential_energy</code>, <code>forces</code> and <a href="https://en.wikipedia.org/wiki/Virial_stress">virial</a>, or using <code>calculate</code> function together with <code>Energy</code>, <code>Forces</code> and <code>Virial</code>.</p><p>Individual calls are implemented by dispatching <code>AtomsCalculators</code> functions</p><ul><li><code>AtomsCalculators.potential_energy</code> for potential energy calculation</li><li><code>AtomsCalculators.forces</code> for allocating force calculation and/or...</li><li><code>AtomsCalculators.forces!</code> for non-allocating force calculation</li><li><code>AtomsCalculators.virial</code> for <a href="https://en.wikipedia.org/wiki/Virial_stress">virial</a> calculation</li></ul><p>The <code>calculate</code> interface is implemented by dispatching to</p><ul><li><code>AtomsCalculators.calculate</code> using <code>AtomsCalculators.Energy()</code> as the first argument for energy calculation</li><li><code>AtomsCalculators.calculate</code> using <code>AtomsCalculators.Forces()</code> as the first argument for forces calculaton</li><li><code>AtomsCalculators.calculate</code> using <code>AtomsCalculators.Virial()</code> as the first argument for virial calculation</li></ul><p>You do not need to implement all of these by yourself. There is macro that will help implement the other calls. </p><p>Each of the individual calls have two common inputs: <code>AtomsBase.AbstractSystem</code> compatible structure and a <code>calculator</code> that incudes details of the calculation method. Calculate interface has additionally the type of calculation as the first input. You can tune calculation by passing keyword arguments, which can be ignored, but they need to be present in the function definition.</p><h2 id="High-level-vs-Low-level-Interface"><a class="docs-heading-anchor" href="#High-level-vs-Low-level-Interface">High-level vs Low-level Interface</a><a id="High-level-vs-Low-level-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#High-level-vs-Low-level-Interface" title="Permalink"></a></h2><p>The philosophy behing AtomsCalculators.jl is to provide high-level calls with default  parameters through <code>potential_energy</code>, <code>forces</code>, <code>forces!</code> and <code>virial</code> and low-level calls  with user-specifiable parameters through <code>calculate</code>. </p><p>The low-level <code>calculate</code> interface follows the <a href="https://lux.csail.mit.edu/stable/">Lux</a> model for parameters and state. This means that calculators are <strong>immutable</strong> structs that are passed  to the <code>calculate</code> function together with <code>parameters</code> and <code>state</code>. All calculations then return  an output and a state.</p><p>When implementing a new calculator, two paths can be chosen:</p><ol><li><strong>Providing a full low level implementation</strong>  In this setup, one implements <code>calculate</code> for the various type of   calculations to be supported, with full handling of parameters and state. <strong>On top of that</strong>,   one should provide sensible <strong>defaults</strong> for calls with parameters and state set to <code>nothing</code>.   These will be used to generate the high-level calls.</li><li><strong>Only implementing high-level calls</strong>  In this case, one only implements the high-level <code>potential_energy</code>, <code>forces</code> and <code>virial</code>   (or some of them). Appropriate low-level implementation for <code>calculate</code> is then automatically   generated by using and returning dummy state and parameters set to <code>nothing</code>.</li></ol><p>Note that when using the high-level approach, fixed parameters are allowed to be bundled inside the calculator.</p><h3 id="Method-Signatures"><a class="docs-heading-anchor" href="#Method-Signatures">Method Signatures</a><a id="Method-Signatures-1"></a><a class="docs-heading-anchor-permalink" href="#Method-Signatures" title="Permalink"></a></h3><p><code>potential_energy</code>, <code>forces</code>, <code>forces!</code> and <code>virial</code>:</p><ul><li>First input is <code>AtomsBase.AbstractSystem</code> compatible structure</li><li>Second input is <code>calculator</code> structure</li><li>Method has to accept keyword arguments (they can be ignored)</li><li>Non-allocating force call <code>force!</code> has an AbstractVector as the first input, to which the evaluated force values are stored (look for more details below)</li></ul><p><code>calculate</code>:</p><ul><li>First input is either <code>Energy()</code>, <code>Forces()</code> or <code>Virial()</code></li><li>Second is <code>AtomsBase.AbstractSystem</code> compatible structure</li><li>Third is <code>calculator</code> structure</li><li>Fourth is <code>parameters</code></li><li>Fifth is <code>state</code></li><li>Method has to accept keyword arguments (they can be ignored)</li></ul><h2 id="Output"><a class="docs-heading-anchor" href="#Output">Output</a><a id="Output-1"></a><a class="docs-heading-anchor-permalink" href="#Output" title="Permalink"></a></h2><p>Outputs for the functions need to have following properties</p><ul><li>Energy is a subtype of <code>Number</code> that has a unit with dimensions of energy (mass * length^2 / time^2)</li><li>Force output is a subtype of <code>AbstractVector</code> with element type also a subtype of AbstractVector (length 3 in 3D) and unit with dimensions of force (mass * length / time^2). With additional property that it can be reinterpret as a matrix</li><li>Virial is a square matrix (3x3 in 3D) that has units of force times length or energy</li><li>Calculate methods return a <a href="https://docs.julialang.org/en/v1/base/base/#Core.NamedTuple">NamedTuple</a> that uses keys <code>:energy</code>, <code>:forces</code> and <code>:virial</code> to identify the results, which have the types defined above, and additionally returns the updated <code>:state</code>.</li></ul></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Thursday 11 July 2024 23:58">Thursday 11 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
